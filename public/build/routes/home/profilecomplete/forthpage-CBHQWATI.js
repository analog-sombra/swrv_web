import{a as G}from"/build/_shared/chunk-E5TFVYJC.js";import{a as v,b as h}from"/build/_shared/chunk-MNPIC26H.js";import"/build/_shared/chunk-QAL4U6RA.js";import{a as T}from"/build/_shared/chunk-6ONMTUBQ.js";import{B as O,a as f,x as y}from"/build/_shared/chunk-6UZFRPE3.js";import{a as I,k as $}from"/build/_shared/chunk-WLPYV2BQ.js";import{c as x,d as W,e as M}from"/build/_shared/chunk-7UEYUE33.js";var o=x(W());var e=x(M());var Y=()=>{let w=$(),H=w.user.id,R=w.country,N=["MALE","FEMALE","TRANSGENDER"],[a,C]=(0,o.useState)([]),[B,k]=(0,o.useState)(!1),[d,E]=(0,o.useState)([]),[D,A]=(0,o.useState)(!1),[u,l]=(0,o.useState)(""),[p,S]=(0,o.useState)(null),[P,g]=(0,o.useState)(!1),[L,j]=(0,o.useState)([]),[n,q]=(0,o.useState)(null),[s,U]=(0,o.useState)(),X=t=>{U(t.target.value.replace(/\D/g,""))},c=(0,o.useRef)(null),z=async t=>{let r=await v.post(`${h}/api/get-city`,{search:t});j(r.data.data)},J=G(t=>t.setIndex),K=I(),[b,Q]=(0,o.useState)(!1),V=()=>{Q(!b)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:`w-full h-screen bg-black bg-opacity-25 fixed top-0 left-0  place-items-center ${P?"grid":"hidden"}`,children:(0,e.jsx)("div",{className:"bg-white shadow-md w-80 rounded-lg p-4",children:L.length==0?(0,e.jsxs)("div",{className:"min-h-96",children:[(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:"No city found with this name"}),(0,e.jsx)("button",{className:"px-2 mx-auto bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",onClick:()=>{g(!1)},children:"Close"})]}):(0,e.jsx)("div",{className:"h-72 overflow-y-scroll no-scrollbar",children:L.map((t,r)=>(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{onClick:()=>{q(t),g(!1),c.current.value=""},className:"my-6 cursor-pointer bg-white rounded-md py-1 border-2 text-center font-normal text-md hover:border-emerald-500",children:[t.name," - ",t.code]},r)}))})})}),(0,e.jsx)("div",{className:"p-8 w-full",children:(0,e.jsx)("div",{className:"flex w-full",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg mt-4",children:"Country"}),(0,e.jsxs)("div",{className:"bg-[#EEEEEE] h-10 rounded-lg  flex gap-1 pl-2 w-full",children:[(0,e.jsx)("div",{className:"flex gap-x-2 overflow-x-scroll flex-nowrap no-scrollbar",children:a.map((t,r)=>(0,e.jsx)("div",{className:"flex bg-white my-1 rounded-md py-1 px-2 items-center gap-x-4",children:(0,e.jsx)("h1",{className:" text-black font-semibold text-center w-40",children:`${t.name} - [${t.code}]`})},r))}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{className:"grid place-items-center px-4 bg-gray-300 rounded-lg",onClick:()=>{k(!0)},children:(0,e.jsx)(f,{icon:y})})]}),(0,e.jsx)("div",{className:`w-full h-screen bg-gray-300 bg-opacity-20 fixed top-0 left-0 ${B?"":"hidden"} grid place-items-center`,children:(0,e.jsxs)("div",{className:"bg-white p-10 cursor-pointer",children:[(0,e.jsx)("div",{className:"min-h-80 overflow-y-scroll no-scrollbar w-80",children:R.map((t,r)=>(0,e.jsxs)("h1",{onClick:()=>{if(a.includes(t)){let i=a.filter(m=>m!=t);C(i)}else C([t])},className:`text-lg text-center font-normal rounded-md w-full my-2 border-2 ${a.includes(t)?"border-green-500 text-green-500":"border-gray-800 text-black"}  no-scrollbar`,children:[t.code," - ",t.name]},r))}),(0,e.jsx)("div",{onClick:()=>{k(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center",children:"Close"})]})}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"Gender"}),(0,e.jsxs)("div",{className:"bg-[#EEEEEE] h-10 rounded-lg  flex gap-1 pl-2 w-full",children:[(0,e.jsx)("div",{className:"flex gap-x-2 overflow-x-scroll flex-nowrap no-scrollbar",children:d.map((t,r)=>(0,e.jsx)("div",{className:"flex bg-white my-1 rounded-md py-1 px-2 items-center gap-x-4",children:(0,e.jsx)("h1",{className:" text-black font-semibold text-center w-40",children:t})},r))}),(0,e.jsx)("div",{className:"grow"}),(0,e.jsx)("div",{className:"grid place-items-center px-4 bg-gray-300 rounded-lg",onClick:()=>{A(!0)},children:(0,e.jsx)(f,{icon:y})})]}),(0,e.jsx)("div",{className:`w-full h-screen bg-gray-300 bg-opacity-20 fixed top-0 left-0 ${D?"":"hidden"} grid place-items-center`,children:(0,e.jsxs)("div",{className:"bg-white p-10 cursor-pointer",children:[(0,e.jsx)("div",{className:"min-h-80 overflow-y-scroll no-scrollbar w-80",children:N.map((t,r)=>(0,e.jsx)("h1",{onClick:()=>{if(d.includes(t)){let i=d.filter(m=>m!=t);E(i)}else E([t])},className:`text-lg text-center font-normal rounded-md w-full my-2 border-2 ${d.includes(t)?"border-green-500 text-green-500":"border-gray-800 text-black"}  no-scrollbar`,children:t},r))}),(0,e.jsx)("div",{onClick:()=>{A(!1)},className:"my-4 bg-red-500 bg-opacity-10 b-2 border-red-500 px-4 py-1 text-red-500 font-medium text-center",children:"Close"})]})}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"City"}),(0,e.jsxs)("div",{className:"w-full bg-[#EEEEEE] rounded-md flex p-2",children:[(0,e.jsx)("div",{className:"grow",children:(0,e.jsx)("input",{ref:c,className:"h-full w-full outline-none focus:border-gray-300 bg-transparent"})}),(0,e.jsx)("div",{className:"bg-white text-bold p-2 rounded-md grid place-items-center w-8 h-8 cursor-pointer",onClick:()=>{var t,r,i,m,F;((t=c.current)==null?void 0:t.value)==null||((r=c.current)==null?void 0:r.value)==null||((i=c.current)==null?void 0:i.value)==""?S("Enter the city name"):(g(!0),S(null),z((F=(m=c.current)==null?void 0:m.value)!=null?F:""))},children:(0,e.jsx)(f,{icon:O})})]}),p==""||p==null||p==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:p}),n==""||n==null||n==null?null:(0,e.jsxs)("div",{className:"bg-white bg-opacity-10 border-2 text-center border-black rounded-md text-black text-md font-normal text-md my-4",children:[n.name," - ",n.code]}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-lg  mt-4",children:"Phone number"}),(0,e.jsxs)("div",{className:"p-2 w-full outline-none bg-[#EEEEEE] focus:border-gray-300 rounded-md flex",children:[(0,e.jsx)("div",{className:"text-center text-black font-normal text-md mr-4",children:n==null?0:n.country.isd}),(0,e.jsx)("input",{onChange:X,value:s,type:"text",maxLength:10,className:"w-full outline-none bg-transparent focus:border-gray-300 rounded-md resize-none"})]}),(0,e.jsxs)("div",{className:"flex gap-2 mt-4 items-center",children:[(0,e.jsx)("div",{children:(0,e.jsx)("input",{checked:b,onChange:V,type:"checkbox",name:"check2"})}),(0,e.jsx)("p",{className:"text-left text-[10px] text-black font-normal",children:"The above details are true and correct"})]}),u==""||u==null||u==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:u}),(0,e.jsx)("div",{className:"w-full",onClick:async()=>{if(a.length==0)l("Select the country");else if(N.length==0)l("Select your gender");else if(n==null||a==null)l("Select the city");else if(s==null||s==null||s==0)l("Fill the contact number");else if(s.toString().length!=10)l("Enter a 10 degit valid contact number");else if(!b)l("Check the box in order to procide");else{let t={id:H,cityId:n.id,userContact:s,userGender:d[0]=="MALE"?"1":d[0]=="FEMALE"?"2":"3"},r=await v({method:"post",url:`${h}/api/updateuser`,data:t,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(r.data.status==!1)return l(r.data.message);J(4),K("/home")}},children:(0,e.jsx)(T,{text:"Next",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})})]})})})]})},Z=Y;export{Z as default};
