import{a as O}from"/build/_shared/chunk-SABFZQUQ.js";import{a as f}from"/build/_shared/chunk-6ONMTUBQ.js";import{a as N,b as k}from"/build/_shared/chunk-MNPIC26H.js";import"/build/_shared/chunk-PVF54MGG.js";import{c as C,k as v}from"/build/_shared/chunk-WLPYV2BQ.js";import{c as p,d as L,e as y}from"/build/_shared/chunk-7UEYUE33.js";var o=p(L());var e=p(y());var T=()=>{let g=v(),x=g.user.id,h=g.paltform,[w,A]=(0,o.useState)([]),[n,c]=(0,o.useState)([]),[s,a]=(0,o.useState)(null),[l,r]=(0,o.useState)(null),S=O(t=>t.setIndex),b=(0,o.useRef)(null);return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)("div",{className:"p-8 w-full",children:[(0,e.jsx)("h1",{className:"text-2xl text-black font-bold",children:"Channels"}),(0,e.jsxs)("div",{className:"flex content-center items-center gap-2 flex-col md:flex-row mt-2",children:[(0,e.jsx)("div",{className:"md:flex gap-2 mt-2 grid place-items-center grid-cols-4",children:h.map((t,d)=>(0,e.jsx)("div",{className:`w-12 h-12 p-2 rounded-lg ${w.includes(t)?"bg-white shadow-xl ":"bg-gray-200"} `,onClick:()=>{A([t])},children:(0,e.jsx)("img",{src:h[d].platformLogoUrl,alt:"error",className:"w-10"})},d))}),(0,e.jsx)("div",{className:"grow hidden md:block"}),(0,e.jsx)("div",{onClick:()=>{c([...n,{val:w[0],status:!1,text:""}]),A([])},children:(0,e.jsx)(f,{text:"Add new Channel",textColor:"text-white",width:"w-36",background:"bg-primary",fontwidth:"font-normal",textSize:"text-md"})})]}),(0,e.jsx)("div",{className:"flex w-full",children:(0,e.jsxs)("div",{className:"w-full",children:[(0,e.jsx)("div",{children:n.map((t,d)=>(0,e.jsxs)("div",{className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2 mt-2 flex ",children:[(0,e.jsx)("div",{children:(0,e.jsx)("img",{src:`${t.val.platformLogoUrl}`,alt:"logo",className:"w-10"})}),(0,e.jsx)("input",{disabled:t.status,type:"text",value:t.text,onChange:u=>{let i=n.filter(m=>m!=t);c([...i,{val:t.val,status:!1,text:u.target.value}])},className:"mx-3 bg-transparent  outline-none border-none focus:border-gray-300 rounded-md w-full"}),t.status?null:(0,e.jsx)("div",{className:"text-white bg-green-500 font-medium text-md text-center rounded-md grid place-items-center px-4 cursor-pointer",onClick:async()=>{if(t.text==null||t.text==null||t.text=="")r(null),a("Fill the handle name");else if(t.text.indexOf(" ")>=0)r(null),a("Hashtag cannot containt space");else{let u={userId:x,platformId:t.val.id,handleName:t.text},i=await N({method:"post",url:`${k}/api/add-handle`,data:u,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(i.data.status==!1)return r(null),a(i.data.message);{a(null),r("Successfully added the user handel");let m=n.filter(E=>E!=t);c([...m,{val:t.val,status:!0,text:t.text}])}}},children:"Done"})]},d))}),s==""||s==null||s==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:s}),l==""||l==null||l==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:l}),(0,e.jsx)("div",{onClick:()=>{n.length==0?(r(null),a("Add at least one handel")):n[0].status?(S(4),b.current.click()):(r(null),a("Add at least one handel"))},children:(0,e.jsx)(f,{text:"Next",textColor:"text-white",width:"w-full",background:"bg-primary",fontwidth:"font-bold"})}),(0,e.jsxs)(C,{method:"post",className:"hidden",children:[(0,e.jsx)("input",{type:"hidden",name:"id",value:x.toString()}),(0,e.jsx)("button",{ref:b,name:"submit",children:"Submit"})]})]})})]})})},F=T;export{F as default};
