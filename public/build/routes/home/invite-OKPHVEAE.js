import{a as H}from"/build/_shared/chunk-J32PS5QO.js";import{a as m,b as f}from"/build/_shared/chunk-MNPIC26H.js";import{k as A,m as C}from"/build/_shared/chunk-WLPYV2BQ.js";import{c as u,d as R,e as k}from"/build/_shared/chunk-7UEYUE33.js";var a=u(R()),F=u(H());var e=u(k());var M=()=>{let V=C().state==="submitting",p=A().user.id,o=(0,a.useRef)(null),r=(0,a.useRef)(null),[l,g]=(0,a.useState)(),[s,n]=(0,a.useState)(""),[x,L]=(0,a.useState)([]),[d,S]=(0,a.useState)(""),I=t=>{g(t.target.value.replace(/\D/g,""))},T=async()=>{let t=await m({method:"get",url:`${f}/api/user-referrals/${p}`,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});L(t.data.data[0].refferrals)};return(0,a.useEffect)(()=>{T()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"grid place-items-center w-full bg-yellow-500 rounded-xl shadow-xl my-6",children:(0,e.jsx)("img",{src:"/images/cashgirl.png",alt:"error",className:"h-72"})}),(0,e.jsxs)("div",{className:"flex gap-4 grow flex-col lg:flex-row",children:[(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 lg:w-96",children:[(0,e.jsx)("h1",{className:"text-black text-xl font-bold text-left",children:"Refer an influencer or brand"}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-md",children:"Name"}),(0,e.jsx)("input",{ref:o,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-md mt-4",children:"Email"}),(0,e.jsx)("input",{ref:r,type:"text",className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),(0,e.jsx)("p",{className:"text-black text-left font-normal text-md mt-4",children:"Contact Number"}),(0,e.jsx)("input",{onChange:I,value:l,type:"text",maxLength:10,className:"bg-[#EEEEEE]  outline-none border-none focus:border-gray-300 rounded-md w-full p-2"}),s==""||s==null||s==null?null:(0,e.jsx)("div",{className:"bg-red-500 bg-opacity-10 border-2 text-center border-red-500 rounded-md text-red-500 text-md font-normal text-md my-4",children:s}),d==""||d==null||d==null?null:(0,e.jsx)("div",{className:"bg-green-500 bg-opacity-10 border-2 text-center border-green-500 rounded-md text-green-500 text-md font-normal text-md my-4",children:d}),(0,e.jsx)("div",{className:" my-2",onClick:async()=>{var t,c,i,b,h,v,w,y,N;if(((t=o.current)==null?void 0:t.value)==null||((c=o.current)==null?void 0:c.value)==null||((i=o.current)==null?void 0:i.value)=="")n("Fill user name");else if(((b=r.current)==null?void 0:b.value)==null||((h=r.current)==null?void 0:h.value)==null||((v=r.current)==null?void 0:v.value)=="")n("Fill the Brand info");else if(!F.validate((w=r.current)==null?void 0:w.value))n("Enter valid email");else if(l==null||l==null||l==0)n("Fill the contact number");else if(l.toString().length!=10)n("Enter a 10 degit valid contact number");else{let O={userId:p,name:(y=o.current)==null?void 0:y.value,email:(N=r.current)==null?void 0:N.value,contact:l},E=await m({method:"post",url:`${f}/api/send-referral`,data:O,headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"*","Access-Control-Allow-Options":"*","Access-Control-Allow-Methods":"*","X-Content-Type-Options":"*","Content-Type":"application/json",Accept:"*"}});if(E.data.status==!1)return n(E.data.message);n(""),o.current.value="",r.current.value="",g(void 0),S("Invitation has been send.")}},children:(0,e.jsx)("button",{className:"w-full text-center text-xl rounded-md my-2 py-1 text-primary font-bold bg-[#01FFF4]",children:"Invite "})})]}),(0,e.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 grow w-full overflow-x-auto",children:[(0,e.jsx)("h1",{className:"text-black text-xl font-bold text-left",children:"Referral status"}),x.length==0?(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("h1",{className:"text-black text-md font-semibold text-center",children:"Your referral list is empty "})}):(0,e.jsxs)("table",{className:"md:w-full md:table-auto border-separate border-spacing-y-3 w-[700px]",children:[(0,e.jsx)("thead",{className:"w-full bg-gray-100 rounded-xl p-2",children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{scope:"col",className:"mt-2 font-normal p-2 text-left w-20"}),(0,e.jsx)("th",{scope:"col",className:"mt-2 font-normal p-2 text-left w-40",children:"Name"}),(0,e.jsx)("th",{scope:"col",className:"mt-2 font-normal p-2 text-left",children:"Email"}),(0,e.jsx)("th",{scope:"col",className:"mt-2 font-normal p-2 text-left",children:"Contact"}),(0,e.jsx)("th",{scope:"col",className:"mt-2 font-normal p-2 text-left",children:"Status"})]})}),(0,e.jsx)("tbody",{className:"gap-y-4",children:x.map((t,c)=>{let i=t.pic=="0"||t.pic==null||t.pic==null||t.pic==""?"/images/avatar/user.png":t.pic;return(0,e.jsxs)("tr",{children:[(0,e.jsx)("td",{children:(0,e.jsx)("img",{src:i,alt:"error",className:"w-12 h-12 rounded-md object-cover"})}),(0,e.jsx)("td",{children:t.userName}),(0,e.jsx)("td",{children:t.email}),(0,e.jsx)("td",{children:t.contact}),(0,e.jsx)("td",{className:"font-medium",children:t.status.isVerified})]},c)})})]})]})]})]})]})},j=M;export{j as default};
